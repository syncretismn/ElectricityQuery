
{% extends "base.html" %}

{% block title %}Query Electricity Usage{% endblock %}

{% block content %}
    <h2>Query Electricity Usage</h2>

    <!-- 显示 Flash 消息 -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class="{{ category }}">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form action="{{ url_for('query') }}" method="POST">
        <label>Enter Meter ID:</label>
        <input type="text" name="meter_id" required><br>

        <label>Enter Timestamp (YYYY-MM-DD HH:MM:SS):</label>
        <input type="text" name="query_timestamp" placeholder="e.g. 2025-02-18 14:30:00" required><br>

        <button type="submit">Query Half-Hourly Reading</button>
    </form>

    {% if query_result %}
        <h3>Query Result</h3>
        <p>{{ query_result }}</p>
    {% endif %}
{% endblock %}
